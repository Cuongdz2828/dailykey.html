<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Key Free Hôm Nay</title>
  <style>
    body {
      margin:0; padding:0; font-family:Arial, sans-serif;
      background:#0f2027; background:linear-gradient(120deg,#2c5364,#203a43,#0f2027);
      color:#fff; display:flex; justify-content:center; align-items:center;
      height:100vh; flex-direction:column; text-align:center;
    }
    .key { font-size:28px; font-weight:bold; margin:20px 0; color:#8ef0ff; }
    button { padding:10px 20px; font-size:16px; cursor:pointer; border-radius:8px; border:none; background:#79d2ff; color:#000; margin:5px; }
  </style>
</head>
<body>
  <h1>🔑 Key Free Hôm Nay</h1>
  <p id="info">Đang tạo key...</p>
  <div id="key" class="key">...</div>
  <button onclick="copyKey()">📋 Copy Key</button>
  <button onclick="copyUser()">📋 Copy User ID</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script>
    const SECRET = "MY_SECRET_SALT";

    // Tạo userID (8 ký tự)
    const user = CryptoJS.MD5(
      navigator.userAgent + screen.width + "x" + screen.height
    ).toString().substring(0,8);

    // Hàm tạo key
    function makeKey() {
      let now = new Date();

      // Nếu đang trong khoảng 00:00 -> 00:01 thì vẫn tính là ngày hôm trước
      if (now.getHours() === 0 && now.getMinutes() < 1) {
        now.setDate(now.getDate() - 1);
      }

      const today = now.toISOString().slice(0,10); // YYYY-MM-DD
      return CryptoJS.MD5(today + SECRET + user)
               .toString()
               .substring(0,10)
               .toUpperCase();
    }

    const key = makeKey();
    document.getElementById("key").innerText = key;
    document.getElementById("info").innerText = "User ID: " + user;

    function copyKey(){
      navigator.clipboard.writeText(key).then(()=>{
        alert("✅ Key đã copy: " + key);
      });
    }

    function copyUser(){
      navigator.clipboard.writeText(user).then(()=>{
        alert("✅ User ID đã copy: " + user);
      });
    }
  </script>
</body>
</html>
